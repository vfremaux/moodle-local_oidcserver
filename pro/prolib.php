<?php
/*   __________________________________________________
    |              on 2.0.12              |
    |__________________________________________________|
*/
 namespace local_oidcserver; use moodle_url; use admin_setting_heading; use admin_setting_configcheckbox; use admin_setting_configtext; use lang_string; use cache; defined("\x4d\117\x4f\104\114\105\137\x49\x4e\x54\105\x52\x4e\101\114") || die; final class pro_manager { public static $shortcomponent = "\154\157\x63\x61\154\137\157\151\x64\x63\163\x65\x72\x76\x65\x72"; public static $component = "\154\157\x63\x61\x6c\x5f\157\151\144\x63\x73\145\x72\x76\145\x72"; public static $componentpath = "\x6c\x6f\x63\x61\x6c\x2f\x6f\151\144\x63\163\145\x72\166\145\x72"; public static $componentsettings = "\154\157\x63\x61\154\x73\x65\164\x74\x69\x6e\x67\157\x69\x64\143\163\145\x72\x76\x65\x72"; public static $componentproviderrouterurl = "\150\x74\x74\x70\72\57\57\x77\x77\x77\56\155\x79\x6c\x65\141\162\x6e\x69\156\x67\x66\x61\x63\164\157\162\171\56\x63\157\155\x2f\160\x72\157\166\151\x64\x65\x72\163\57\x72\157\165\164\145\162\x2e\160\x68\x70"; protected function __construct() { assert(1); } public static function instance() { goto Abzwt; Abzwt: static $WcxMY; goto NdpXc; rNE4e: return $WcxMY; goto yH_lm; Or5nW: nTzGX: goto rNE4e; NdpXc: if (!is_null($WcxMY)) { goto nTzGX; } goto T8RKQ; T8RKQ: $WcxMY = new pro_manager(); goto Or5nW; yH_lm: } public function require_pro($dTrxJ = false) { goto bFvFK; USQyy: print_error(get_string("\x6e\157\160\162\157\141\143\x63\145\163\x73", self::$shortcomponent)); goto nF_WC; W5f6m: if (!$hMB5C($dTrxJ)) { goto BetlO; } goto MQgo_; MQgo_: if ($this->set_and_check_license_key()) { goto ofdlC; } goto USQyy; e6jgR: goto vhOIx; goto wSIKv; dHIT3: vhOIx: goto H21Dk; u4NLk: return "\x70\162\x6f" == $hMB5C(); goto e6jgR; C2VSF: BetlO: goto dHIT3; wSIKv: n1pFp: goto W5f6m; bFvFK: $hMB5C = self::$shortcomponent . "\137\163\x75\x70\x70\x6f\x72\x74\163\x5f\146\145\x61\x74\x75\162\145"; goto nBBW0; nBBW0: if (!empty($dTrxJ)) { goto n1pFp; } goto u4NLk; nF_WC: ofdlC: goto C2VSF; H21Dk: } public function add_settings(&$l6hNy, &$IfMMv) { goto ya9t4; lJpv0: $PAGE->requires->js_call_amd(self::$component . "\57\x70\162\157", "\151\x6e\151\164"); goto tEgdV; J0rTZ: $IfMMv->add(new admin_setting_heading($lB_sv, false, $xll42)); goto IQ7IW; jwv9N: $lB_sv = self::$shortcomponent . "\57\154\x69\x63\x65\156\x73\x65\160\162\157\166\151\x64\x65\x72"; goto SAH4G; ORiij: $OQahO = get_string("\154\x69\x63\145\x6e\x73\x65\x6b\x65\171", self::$shortcomponent); goto nm4Ka; thmgJ: $lB_sv = self::$shortcomponent . "\57\145\155\x75\154\141\x74\145\x63\157\155\155\165\x6e\x69\164\x79"; goto mOLWm; jroPJ: include_once $CFG->dirroot . "\57" . self::$componentpath . "\x2f\x70\162\x6f\57\154\157\143\x61\x6c\160\162\x6f\154\x69\x62\56\160\150\x70"; goto LHviC; M44Aj: $xll42 = new lang_string("\x67\x65\164\154\151\143\145\156\x73\x65\153\x65\x79\137\144\x65\163\143", self::$shortcomponent, $b1Ssn->out()); goto J0rTZ; SiBqc: $IfMMv->add(new admin_setting_configtext($lB_sv, $OQahO, $xll42, '')); goto XzXe7; l1EVi: $b1Ssn = new moodle_url("\x2f" . self::$componentpath . "\57\160\x72\157\57\147\x65\164\157\x70\x74\151\x6f\x6e\x73\56\160\150\160"); goto M44Aj; I6z7y: $IfMMv->add(new admin_setting_configtext($lB_sv, $OQahO, $xll42, '')); goto VKNGw; tEgdV: $IfMMv->add(new admin_setting_heading("\x70\x6c\165\147\x69\156\144\151\163\164\150\x64\x72", get_string("\x70\154\x75\147\151\x6e\x64\x69\x73\164", self::$shortcomponent), '')); goto thmgJ; qMv2U: $xll42 = get_string("\x6c\151\143\x65\x6e\163\x65\160\x72\157\x76\151\144\x65\x72\x5f\144\x65\163\x63", self::$shortcomponent); goto I6z7y; ya9t4: global $CFG, $PAGE; goto lJpv0; LHviC: $lB_sv = self::$shortcomponent . "\x2f\163\160\145\143\151\146\x69\x63\x70\x72\x6f\163\x65\164\x74\151\156\x67\x73"; goto uIBTI; XzXe7: $lB_sv = self::$shortcomponent . "\x2f\x67\145\164\153\145\171"; goto l1EVi; mOLWm: $OQahO = get_string("\145\155\165\x6c\141\x74\x65\x63\157\x6d\x6d\x75\x6e\151\x74\171", self::$shortcomponent); goto Dgj0j; SAH4G: $OQahO = get_string("\x6c\x69\143\x65\x6e\x73\145\x70\162\x6f\x76\x69\144\145\162", self::$shortcomponent); goto qMv2U; FZSsd: $xll42 = ''; goto Xm6Ws; Cch7B: local_pro_manager::add_settings($l6hNy, $IfMMv); goto HiPdA; Dgj0j: $xll42 = get_string("\145\x6d\165\154\x61\x74\x65\x63\x6f\155\x6d\165\156\x69\x74\x79\137\144\x65\163\x63", self::$shortcomponent); goto Plp9k; HiPdA: Zwyxh: goto xcEWv; Plp9k: $IfMMv->add(new admin_setting_configcheckbox($lB_sv, $OQahO, $xll42, 0)); goto jwv9N; nm4Ka: $xll42 = get_string("\154\151\143\x65\x6e\x73\145\153\x65\x79\137\x64\145\163\x63", self::$shortcomponent); goto SiBqc; IQ7IW: if (!file_exists($CFG->dirroot . "\57" . self::$componentpath . "\57\x70\162\x6f\57\x6c\157\x63\x61\154\x70\162\157\x6c\151\x62\56\x70\x68\160")) { goto Zwyxh; } goto jroPJ; uIBTI: $OQahO = get_string("\163\x70\145\143\151\x66\x69\143\160\x72\157\163\145\x74\x74\x69\156\x67\163", self::$shortcomponent); goto FZSsd; Xm6Ws: $IfMMv->add(new admin_setting_heading($lB_sv, $OQahO, $xll42)); goto Cch7B; VKNGw: $lB_sv = self::$shortcomponent . "\57\x6c\x69\143\145\156\x73\145\x6b\145\171"; goto ORiij; xcEWv: } public function send_empty_license_signal() { goto f_0nD; SCEVU: $QfeuI = get_config(self::$component); goto Cm_n9; d_9Z7: curl_setopt($Wlpau, CURLOPT_POST, false); goto psvwZ; Cm_n9: $hMB5C = self::$shortcomponent . "\137\163\165\x70\160\x6f\162\x74\163\x5f\x66\x65\x61\164\x75\x72\145"; goto FrtNS; n2ZtK: set_config("\154\x69\x63\145\156\163\145\153\145\x79\143\150\x65\x63\x6b\144\141\164\x65", time(), self::$shortcomponent); goto EAVq0; psvwZ: curl_exec($Wlpau); goto n2ZtK; O0m2V: curl_setopt($Wlpau, CURLOPT_RETURNTRANSFER, true); goto d_9Z7; BKGen: $zVxWr .= "\46\143\x6f\155\x70\157\156\145\156\x74\x3d" . self::$component; goto T0poz; nv7Qv: $zVxWr = self::$componentproviderrouterurl; goto eSIH4; rav6Q: $zVxWr .= "\x26\163\x65\x72\x76\x69\143\x65\x3d\164\145\154\154"; goto BKGen; FrtNS: if (!("\160\162\157" == $hMB5C() && empty($QfeuI->licensekey))) { goto qj582; } goto nv7Qv; EAVq0: qj582: goto Pu7Bi; Vc9TD: $Wlpau = curl_init($zVxWr); goto oTSEI; eSIH4: $zVxWr .= "\77\160\162\x6f\166\151\x64\145\x72\x3d" . $QfeuI->licenseprovider; goto rav6Q; T0poz: $zVxWr .= "\46\150\157\163\x74\x3d" . urlencode($CFG->wwwroot); goto Vc9TD; f_0nD: global $CFG; goto SCEVU; oTSEI: self::set_proxy($Wlpau, $zVxWr); goto O0m2V; Pu7Bi: } public function return_url() { return new moodle_url("\57\141\x64\x6d\x69\x6e\x2f\x73\x65\164\x74\x69\156\x67\163\56\160\150\x70\77\x73\145\143\164\151\157\156\75" . self::$componentsettings, [], "\147\x65\x74\x73\165\160\160\x6f\162\x74\154\x69\143\x65\156\163\x65"); } public function print_empty_license_message() { return get_string("\x65\155\x70\164\171\x73\165\160\x70\157\162\164\x6c\151\x63\145\x6e\163\x65\155\145\163\x73\x61\147\x65", self::$shortcomponent); } public function set_and_check_license_key($JrtU9 = null, $wONTo = null, $mnszX = false) { goto hwCw1; ujBk6: if (!function_exists("\144\x65\142\165\x67\137\x74\x72\141\x63\145")) { goto gQheu; } goto IlwkN; Zg0Ne: $JrtU9 = $QfeuI->licensekey; goto QJ4t0; ryz7t: self::set_proxy($Wlpau, $zVxWr); goto k1aX3; gKnHX: BpRx3: goto JkZ0Y; iuFfK: if (!(time() < $f9cE5 + 10 * DAYSECS)) { goto YA46Y; } goto Om4lP; eD9yC: debug_trace($zVxWr, TRACE_ERRORS); goto Fdy6z; i8IpF: $or73K = curl_exec($Wlpau); goto ATCSy; Q85aw: $f9cE5 = $iNCE9->get("\154\151\143\x65\156\163\145\x63\x68\145\x63\153\x64\141\x74\x65"); goto bkA3n; Dwk5z: $QfeuI = get_config(self::$shortcomponent); goto e9sOD; AHYXT: set_config("\154\151\x63\145\x6e\163\x65\x6b\145\x79", $or73K, self::$shortcomponent); goto bU2ET; yrchO: $Wlpau = curl_init($zVxWr); goto ryz7t; lSPYc: $zVxWr .= "\46\x68\x6f\x73\164\x3d" . urlencode($CFG->wwwroot) . "\x26\x75\x73\x65\x72\163\x3d" . $UesmP . "\46\x63\x6f\165\162\163\145\x73\x3d" . $GJXEF . "\46\x63\157\x75\x72\163\145\143\141\x74\x73\x3d" . $BCBs_; goto yrchO; Fdy6z: p1Dtb: goto AHYXT; NhAus: if (!function_exists("\x64\x65\x62\x75\x67\137\x74\x72\141\143\145")) { goto p1Dtb; } goto eD9yC; MyaE1: $wONTo = $QfeuI->licenseprovider; goto oOVPP; CAj9J: die; goto EX_E6; WTO6o: $BCBs_ = $DB->count_records("\x63\x6f\165\162\x73\145\137\143\x61\164\145\147\x6f\x72\151\145\163"); goto r6oIz; nR7f3: $iNCE9->set("\154\151\x63\x65\x6e\x73\145\x63\150\x65\143\x6b\144\141\x74\145", time()); goto tdtmN; CWjjq: curl_setopt($Wlpau, CURLOPT_POST, false); goto ujBk6; bkA3n: if (!preg_match("\x2f\123\x45\x54\40\117\113\57", $XJQC6)) { goto BpRx3; } goto iuFfK; nUD4e: if (!empty($wONTo)) { goto VXBWd; } goto MyaE1; lXLdk: print_error($or73K); goto CAj9J; IlwkN: debug_trace($zVxWr, TRACE_DEBUG_FINE); goto PIPfw; ztw1h: $UesmP = $DB->count_records("\x75\x73\145\x72", array("\144\145\154\x65\x74\145\x64" => 0)); goto RMuVC; QJ4t0: J5d3R: goto nUD4e; sbtu7: chKqu: goto DHx0F; DWtyW: return $XJQC6; goto azZZv; kx5QO: if (!$mnszX) { goto JUa7k; } goto lXLdk; PIPfw: gQheu: goto i8IpF; cB2JF: debug_trace(self::$shortcomponent . "\40\x53\145\x74\40\114\x69\x63\x65\156\x73\145\40\103\x61\143\x68\x65\x20\x48\151\164\40\x21\40" . $e_wir . "\40\x64\141\x79\x73\40\x6c\145\146\x74", TRACE_DEBUG_FINE); goto DWtyW; Om4lP: $e_wir = floor(($f9cE5 - time()) / DAYSECS); goto cB2JF; bU2ET: self::send_empty_license_signal(); goto kx5QO; JkZ0Y: debug_trace(self::$shortcomponent . "\40\x53\145\164\x20\x4c\x69\143\145\156\163\145\x20\103\141\143\150\x65\40\x4d\x69\163\x73\40\x21", TRACE_DEBUG_FINE); goto Dwk5z; Gxa9G: $zVxWr .= "\77\160\x72\157\166\x69\144\145\162\x3d" . $wONTo . "\46\x73\x65\x72\166\151\143\145\75\x73\145\x74\x26\143\x75\163\x74\157\155\x65\162\x6b\x65\x79\x3d" . $JrtU9 . "\x26\x63\157\155\x70\x6f\156\x65\156\x74\75" . self::$component; goto lSPYc; hwCw1: global $CFG, $DB; goto Tkmni; azZZv: YA46Y: goto gKnHX; EX_E6: JUa7k: goto sbtu7; RMuVC: $GJXEF = $DB->count_records("\x63\157\165\x72\x73\145"); goto WTO6o; rO44x: $XJQC6 = $iNCE9->get("\154\151\143\x65\156\163\x65\163\x74\x61\x74\165\x73"); goto Q85aw; tdtmN: return $or73K; goto fsh1p; k1aX3: curl_setopt($Wlpau, CURLOPT_RETURNTRANSFER, true); goto CWjjq; oOVPP: VXBWd: goto ztw1h; ATCSy: if (preg_match("\57\x28\x53\105\124\x7c\103\x48\x45\x43\x4b\51\40\117\x4b\57", $or73K)) { goto chKqu; } goto NhAus; e9sOD: if (!empty($JrtU9)) { goto J5d3R; } goto Zg0Ne; r6oIz: $zVxWr = self::$componentproviderrouterurl; goto Gxa9G; DHx0F: $iNCE9->set("\154\x69\x63\145\156\x73\x65\163\x74\141\x74\165\x73", $or73K); goto nR7f3; Tkmni: $iNCE9 = cache::make(self::$component, "\160\162\x6f"); goto rO44x; fsh1p: } public function check_license_key($JrtU9 = null, $wONTo = null, $mnszX = false) { goto ja7tD; bLZgX: self::set_proxy($Wlpau, $zVxWr); goto iZu60; AyWeH: self::send_empty_license_signal(); goto PhCG2; w84aM: debug_trace($zVxWr, TRACE_DEBUG_FINE); goto taQP0; VxlJI: $zVxWr .= "\46\x68\157\163\x74\x3d" . urlencode($CFG->wwwroot); goto s3Obn; ZC_Ep: return $XJQC6; goto CY4KK; Fp2Sk: $JrtU9 = $QfeuI->licensekey; goto J11Gp; g5rls: if (!preg_match("\x2f\x28\123\x45\x54\174\x43\110\x45\103\x4b\51\x20\117\113\x2f", $XJQC6)) { goto Lgs8f; } goto n9WG1; vwQT3: $wONTo = $QfeuI->licenseprovider; goto T23py; i4FsX: $zVxWr = self::$componentproviderrouterurl; goto VfA0s; MZdoS: if (!function_exists("\144\x65\x62\165\147\137\x74\x72\x61\x63\x65")) { goto bR1OY; } goto w84aM; ILvyv: vxRFm: goto sENuz; VfA0s: $zVxWr .= "\x3f\160\x72\x6f\166\x69\144\145\x72\x3d" . $wONTo; goto M1feG; sENuz: set_config("\154\151\143\145\x6e\x73\145\153\x65\x79", $or73K, self::$shortcomponent); goto AyWeH; EBdL3: $iNCE9->set("\154\151\x63\x65\156\x73\x65\163\x74\141\164\x75\x73", $or73K); goto K16mX; T_tmz: die; goto eOZkt; PhCG2: if (!$mnszX) { goto Zuu9b; } goto EpapW; rU_78: if (!empty($wONTo)) { goto F4pPb; } goto vwQT3; J11Gp: zDQ72: goto rU_78; lQwRQ: $iNCE9 = cache::make(self::$component, "\x70\x72\x6f"); goto YN08T; Bl5Ej: curl_setopt($Wlpau, CURLOPT_POST, false); goto MZdoS; M1feG: $zVxWr .= "\46\x73\x65\x72\166\x69\143\145\x3d\143\x68\x65\x63\153"; goto Hc5RY; eOZkt: Zuu9b: goto PFar6; Hc5RY: $zVxWr .= "\46\143\x75\x73\x74\157\x6d\x65\x72\153\x65\x79\75" . $JrtU9; goto i5Jst; pGccM: if (preg_match("\x2f\x28\123\105\x54\174\103\110\105\x43\113\x29\40\x4f\113\57", $or73K)) { goto Y3wHb; } goto ADtZz; yHi0z: debug_trace(self::$shortcomponent . "\40\103\150\145\x63\x6b\40\x4c\151\143\x65\x6e\x73\145\40\x43\x61\143\x68\145\x20\110\x69\164\x20\41\x20" . $e_wir . "\40\x64\141\x79\163\x20\154\x65\x66\x74", TRACE_DEBUG_FINE); goto ZC_Ep; iZu60: curl_setopt($Wlpau, CURLOPT_RETURNTRANSFER, true); goto Bl5Ej; XpPXu: debug_trace($zVxWr, TRACE_ERRORS); goto ILvyv; JKsWC: $f9cE5 = $iNCE9->get("\154\x69\143\x65\156\x73\x65\x63\150\x65\x63\153\x64\141\164\x65"); goto g5rls; ja7tD: global $CFG, $DB; goto lQwRQ; EpapW: print_error($or73K); goto T_tmz; s3Obn: $Wlpau = curl_init($zVxWr); goto bLZgX; CY4KK: cNTKW: goto M9Ugv; PFar6: Y3wHb: goto EBdL3; n9WG1: if (!(time() < $f9cE5 + 10 * DAYSECS)) { goto cNTKW; } goto HSwqt; ADtZz: if (!function_exists("\144\145\142\165\x67\137\x74\162\141\143\x65")) { goto vxRFm; } goto XpPXu; K16mX: $iNCE9->set("\154\151\143\145\156\163\145\x63\150\x65\x63\x6b\144\141\x74\145", time()); goto az93X; T23py: F4pPb: goto i4FsX; X9tUE: $or73K = curl_exec($Wlpau); goto pGccM; piRGz: debug_trace(self::$shortcomponent . "\40\x43\150\x65\143\x6b\40\x4c\151\143\x65\x6e\163\145\x20\x43\x61\x63\150\x65\x20\x4d\151\x73\x73\x20\x21", TRACE_DEBUG_FINE); goto aAtNG; aAtNG: $QfeuI = get_config(self::$shortcomponent); goto xVJDb; az93X: return $or73K; goto AARWF; i5Jst: $zVxWr .= "\46\143\x6f\x6d\160\157\x6e\x65\156\164\75" . self::$component; goto VxlJI; taQP0: bR1OY: goto X9tUE; xVJDb: if (!empty($JrtU9)) { goto zDQ72; } goto Fp2Sk; HSwqt: $e_wir = floor(($f9cE5 - time()) / DAYSECS); goto yHi0z; M9Ugv: Lgs8f: goto piRGz; YN08T: $XJQC6 = $iNCE9->get("\x6c\x69\143\x65\156\163\145\x73\x74\x61\164\165\x73"); goto JKsWC; AARWF: } public function get_license_key($C9mcP, $wONTo, $I_B2_, &$lRqSU) { goto CKlcc; Xa5aM: $lRqSU = get_string("\x65\162\x72\x6f\x72\156\157\153\145\x79\x67\145\156\x65\162\x61\164\145\x64", self::$shortcomponent); goto e2wqO; tZ41f: if (preg_match("\57\x5b\101\55\132\x30\55\71\x5d\x7b\x34\x7d\x2d\x5b\101\x2d\132\x30\x2d\x39\135\x7b\x34\175\55\133\x41\x2d\x5a\x30\x2d\x39\x5d\x7b\x34\x7d\x2d\133\x41\55\x5a\60\x2d\71\x5d\173\64\x7d\57", $or73K->reference)) { goto SsBcF; } goto MdVJz; tQ2qg: PNIkf: goto JvT3i; vBW_g: $lRqSU = get_string("\x65\162\162\x6f\x72\162\x65\163\160\x6f\156\x73\145", self::$shortcomponent, $or73K->error); goto s67GT; orqSz: if (!empty($wONTo)) { goto I3uu2; } goto XftqF; bYkMu: k5X4X: goto j4SVD; cLxfx: curl_setopt($Wlpau, CURLOPT_POST, false); goto wZE3N; isGLk: $GJXEF = $DB->count_records("\x63\157\x75\162\x73\145"); goto OR9zs; s67GT: return false; goto f_POr; MdIma: $iNCE9 = cache::make(self::$component, "\x70\x72\157"); goto YvobP; MdVJz: $NS8ar = new moodle_url("\x2f" . self::$componentpath . "\57\160\162\x6f\57\147\145\x74\153\145\x79\x2e\x70\150\x70"); goto Xa5aM; gGoLC: tW5XB: goto orqSz; OR9zs: $BCBs_ = $DB->count_records("\x63\x6f\165\x72\163\x65\137\x63\x61\164\145\147\157\162\x69\145\163"); goto hTkWv; qRwh0: set_config("\x6c\x69\143\x65\156\163\145\160\x72\157\166\151\144\145\x72", $wONTo, self::$shortcomponent); goto MdIma; YvobP: $iNCE9->set("\154\151\x63\x65\x6e\x73\145\x73\x74\141\x74\x75\163", "\123\x45\124\40\117\113"); goto xNSsM; Ncoov: curl_setopt($Wlpau, CURLOPT_RETURNTRANSFER, true); goto cLxfx; CKlcc: global $CFG, $DB; goto GacMc; PiIWg: uK1iq: goto vBW_g; f_POr: LY1z9: goto tZ41f; U_Fvk: $zVxWr .= "\46\143\157\155\x70\157\156\x65\x6e\164\x3d" . self::$component; goto nOsFF; JvT3i: if (!($or73K->status == 100)) { goto LY1z9; } goto unIeY; EnMsR: $zVxWr .= "\x26\143\165\163\164\157\x6d\145\162\x6b\145\x79\x3d" . $C9mcP; goto U_Fvk; mYK2u: $lRqSU = get_string("\145\162\x72\157\162\x6e\x6f\x64\151\x73\164\x72\151\142\x75\164\x6f\162\153\145\x79", self::$shortcomponent); goto Z_hr3; dogfo: $zVxWr .= "\x26\x75\163\145\x72\x73\x3d" . $UesmP; goto oawYh; czgW4: return false; goto bYkMu; GacMc: if (!empty($C9mcP)) { goto tW5XB; } goto mYK2u; IfWNj: $wONTo = $QfeuI->licenseprovider; goto ty02C; RrxKR: $Wlpau = curl_init($zVxWr); goto fPcKO; Z4BEA: if (!empty($wONTo)) { goto k5X4X; } goto tBQdE; XftqF: $QfeuI = get_config(self::$shortcomponent); goto IfWNj; oawYh: $zVxWr .= "\46\x63\157\x75\x72\163\145\163\x3d" . $GJXEF; goto hWtFy; HKtFc: return false; goto tQ2qg; eh8EO: $zVxWr .= "\x26\163\145\162\166\151\x63\145\75\x67\145\x74"; goto EnMsR; BAVgr: $zVxWr .= "\77\x70\x72\x6f\x76\x69\x64\x65\x72\75" . $wONTo; goto eh8EO; nOsFF: $zVxWr .= "\x26\150\157\163\164\x3d" . urlencode($CFG->wwwroot); goto dogfo; pMTCb: debug_trace($zVxWr, TRACE_ERRORS); goto PiIWg; unIeY: if (!function_exists("\144\x65\x62\x75\x67\x5f\164\x72\141\x63\x65")) { goto uK1iq; } goto pMTCb; YtlOZ: debug_trace($zVxWr, TRACE_ERRORS); goto sowkS; xNSsM: $iNCE9->set("\x6c\x69\x63\x65\156\x73\145\143\150\x65\x63\x6b\x64\x61\164\x65", time()); goto HOYoD; fPcKO: self::set_proxy($Wlpau, $zVxWr); goto Ncoov; rJTsq: $zVxWr .= "\x26\157\x70\x74\x69\157\156\x3d" . $I_B2_; goto RrxKR; hWtFy: $zVxWr .= "\x26\x63\157\165\162\163\x65\143\141\x74\x73\75" . $BCBs_; goto rJTsq; hTkWv: $zVxWr = self::$componentproviderrouterurl; goto BAVgr; iSaU5: JxEcj: goto Xhi47; SmXzH: $lRqSU = get_string("\x65\162\x72\157\162\x6a\163\157\x6e", self::$shortcomponent); goto HKtFc; QeAsW: $or73K = json_decode($lhQLx); goto Pvr2c; e2wqO: return false; goto YgX4Q; Z_hr3: return false; goto gGoLC; YSkHl: set_config("\x6c\151\x63\x65\156\163\x65\x6b\145\171", $or73K->reference, self::$shortcomponent); goto qRwh0; ty02C: I3uu2: goto Z4BEA; TZ6jP: if (!function_exists("\144\x65\142\165\x67\137\164\162\141\143\x65")) { goto vR3gQ; } goto YtlOZ; j4SVD: $UesmP = $DB->count_records("\x75\x73\x65\x72", array("\144\x65\x6c\145\x74\145\144" => 0)); goto isGLk; Xhi47: $lhQLx = curl_exec($Wlpau); goto QeAsW; YgX4Q: SsBcF: goto YSkHl; HOYoD: return true; goto pNzSq; X0Xea: debug_trace($zVxWr, TRACE_DEBUG_FINE); goto iSaU5; sowkS: vR3gQ: goto SmXzH; tBQdE: $lRqSU = get_string("\145\162\x72\x6f\162\x6e\157\160\x72\x6f\x76\x69\x64\145\162", self::$shortcomponent); goto czgW4; wZE3N: if (!function_exists("\144\145\x62\x75\x67\x5f\164\162\x61\x63\x65")) { goto JxEcj; } goto X0Xea; Pvr2c: if (!empty($or73K)) { goto PNIkf; } goto TZ6jP; pNzSq: } public function get_activation_options($C9mcP, $wONTo = null) { goto p19X8; gS_ic: EFiLU: goto natci; IPTFo: print_error(get_string("\x65\162\162\157\x72\x6a\x73\157\x6e", self::$shortcomponent), $NS8ar); goto vxpI_; xwdTn: NbfLe: goto BzTLi; natci: return $or73K->choices; goto e5r2u; m6rvI: print_error(get_string("\145\x72\x72\x6f\162\x72\145\163\160\x6f\156\163\145", self::$shortcomponent, $or73K->error), $NS8ar); goto RlXuf; Hxcxv: if (!empty($wONTo)) { goto fu4mp; } goto XhwCz; ZRWx1: $QfeuI = get_config(self::$shortcomponent); goto pyLe8; ICw9D: $zVxWr .= "\46\150\x6f\x73\x74\x3d" . urlencode($CFG->wwwroot); goto G3epZ; ngJvZ: auCV_: goto Hxcxv; G3epZ: $Wlpau = curl_init($zVxWr); goto aJvZU; aJvZU: self::set_proxy($Wlpau, $zVxWr); goto dCsVV; rYUpr: curl_setopt($Wlpau, CURLOPT_POST, false); goto SehPc; hII8T: if (!function_exists("\144\x65\142\165\147\137\164\162\x61\143\x65")) { goto gdcO6; } goto abxQe; I3lf_: fu4mp: goto l3uj5; BzTLi: $lhQLx = curl_exec($Wlpau); goto iJw0v; p19X8: global $CFG, $DB; goto Xp3dL; lve6c: if (!($or73K->status == 100)) { goto EFiLU; } goto hII8T; abxQe: debug_trace($zVxWr, TRACE_ERRORS); goto PrGUl; Xp3dL: if (!empty($wONTo)) { goto auCV_; } goto ZRWx1; KZx2L: $zVxWr .= "\x3f\160\x72\x6f\166\151\144\145\162\75" . $wONTo . "\46\163\145\x72\166\151\x63\x65\75\147\x65\x74\x70\162\x6f\x64\x75\x63\164\x73\x26\x63\165\163\x74\x6f\155\x65\162\x6b\x65\x79\x3d" . $C9mcP . "\x26\x63\157\155\x70\157\156\x65\156\x74\x3d" . self::$component; goto ICw9D; RlXuf: die; goto gS_ic; teBgI: debug_trace($zVxWr, TRACE_DEBUG_FINE); goto xwdTn; vxpI_: die; goto W0T5A; SehPc: if (!function_exists("\144\145\x62\x75\x67\137\x74\162\x61\143\145")) { goto NbfLe; } goto teBgI; dCsVV: curl_setopt($Wlpau, CURLOPT_RETURNTRANSFER, true); goto rYUpr; WDcLv: if (!empty($or73K)) { goto LPhZn; } goto TixvK; pyLe8: $wONTo = $QfeuI->licenseprovider; goto ngJvZ; YgOC2: debug_trace($zVxWr, TRACE_ERRORS); goto U2i1N; l3uj5: $zVxWr = self::$componentproviderrouterurl; goto KZx2L; U2i1N: y6Pnv: goto IPTFo; TixvK: if (!function_exists("\144\145\142\x75\x67\x5f\164\x72\x61\x63\x65")) { goto y6Pnv; } goto YgOC2; W0T5A: LPhZn: goto lve6c; iJw0v: $or73K = json_decode($lhQLx); goto WDcLv; PrGUl: gdcO6: goto m6rvI; XhwCz: print_error(get_string("\x65\x72\x72\x6f\x72\156\157\160\x72\157\x76\x69\144\145\162", self::$shortcomponent)); goto I3lf_; e5r2u: } protected static function set_proxy(&$Wlpau, $zVxWr) { goto Cm8SG; orvsp: w45yg: goto zU0QF; Phi2v: if (!(!empty($CFG->proxytype) and $CFG->proxytype == "\x53\117\103\113\x53\x35")) { goto kWXnh; } goto FIHoz; SiZ5N: goto bSMhq; goto qPq6U; FIHoz: if (defined("\103\125\122\x4c\x50\122\117\x58\x59\137\x53\x4f\103\113\x53\65")) { goto YZ7Zw; } goto AqPCB; bloI6: goto w45yg; goto EYXVD; s7Xeu: bSMhq: goto f3pJr; f3pJr: kWXnh: goto QVm6A; F7CZc: curl_setopt($Wlpau, CURLOPT_PROXYTYPE, CURLPROXY_SOCKS5); goto s7Xeu; UBQJG: curl_setopt($Wlpau, CURLOPT_PROXY, $CFG->proxyhost); goto orvsp; dYxzA: if (!defined("\103\125\x52\x4c\117\x50\124\137\120\122\117\130\131\101\x55\124\x48")) { goto PBCLX; } goto BDBmW; QVm6A: curl_setopt($Wlpau, CURLOPT_HTTPPROXYTUNNEL, false); goto Ty1sh; L1QV2: print_error("\163\157\x63\x6b\x73\x6e\157\x74\x73\x75\x70\x70\157\x72\x74\x65\144", "\x6d\x6e\145\164"); goto SiZ5N; EYXVD: K7xlT: goto UBQJG; axijq: curl_setopt($Wlpau, CURLOPT_PROXY, $CFG->proxyhost . "\x3a" . $CFG->proxyport); goto bloI6; Cm8SG: global $CFG; goto bJUo3; qPq6U: YZ7Zw: goto F7CZc; Ty1sh: if (empty($CFG->proxyport)) { goto K7xlT; } goto axijq; WOowC: curl_setopt($Wlpau, CURLOPT_PROXYUSERPWD, $CFG->proxyuser . "\x3a" . $CFG->proxypassword); goto dYxzA; GE0od: PBCLX: goto gFK8B; FFR2h: ICsAo: goto G2TS6; BDBmW: curl_setopt($Wlpau, CURLOPT_PROXYAUTH, CURLAUTH_BASIC | CURLAUTH_NTLM); goto GE0od; zU0QF: if (!(!empty($CFG->proxyuser) and !empty($CFG->proxypassword))) { goto GLcH9; } goto WOowC; bJUo3: if (!(!empty($CFG->proxyhost) and !is_proxybypass($zVxWr))) { goto ICsAo; } goto Phi2v; gFK8B: GLcH9: goto FFR2h; AqPCB: curl_close($Wlpau); goto L1QV2; G2TS6: } }
